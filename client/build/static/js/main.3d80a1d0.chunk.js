(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{166:function(e,t,a){},243:function(e,t,a){e.exports=a.p+"static/media/scvlogo.001b21b6.png"},244:function(e,t,a){e.exports=a.p+"static/media/koislogo.e5789706.png"},251:function(e,t,a){e.exports=a(507)},507:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),l=a.n(o),c=a(23),i=(a(256),a(166),a(509)),s=a(513),m=a(8),u=a(514),p=a(36),d=a(41),f=a(24),g=Object(f.a)(),h=a(249);function E(e){var t=e.component,a=e.isPrivate,n=Object(h.a)(e,["component","isPrivate"]),o=localStorage.getItem("_kToken");return a&&!o?r.a.createElement(d.a,{to:"/login"}):r.a.createElement(d.b,Object.assign({},n,{component:t}))}E.defaultProps={isPrivate:!1};var v=a(15),b=a.n(v),w=a(54),y=a(229),k=a(230),x=a(63),j=a.n(x),O=function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,null,[{key:"register",value:function(e){var t,a,n,r;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.name,a=e.email,n=e.password,r=e._AUTH,o.abrupt("return",new Promise((function(e,o){return b.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,b.a.awrap(j.a.post("".concat("","/api/auth/user"),{params:{name:t,email:a,password:n},headers:{Authorization:"Token ".concat(r),"Content-Type":"application/x-www-form-urlencoded"}}).then(e).catch(o));case 2:case"end":return l.stop()}}))})));case 2:case"end":return o.stop()}}))}},{key:"login",value:function(e){var t,a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.email,a=e.password,n.abrupt("return",new Promise((function(e,n){return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.a.awrap(j.a.post("".concat("","/api/auth/login"),{email:t,password:a}).then(e).catch(n));case 2:case"end":return r.stop()}}))})));case 2:case"end":return n.stop()}}))}},{key:"delUser",value:function(e,t){return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.a.awrap(j.a.delete("".concat("","/api/auth/user/").concat(e),{headers:{Authorization:"Token ".concat(t),"Content-Type":"application/x-www-form-urlencoded"}}).then(a).catch(n));case 2:case"end":return r.stop()}}))})));case 1:case"end":return a.stop()}}))}},{key:"getUser",value:function(e,t){return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.a.awrap(j.a.get("".concat("","/api/auth/user/").concat(e),{headers:{Authorization:"Token ".concat(t),"Content-Type":"application/x-www-form-urlencoded"}}).then(a).catch(n));case 2:case"end":return r.stop()}}))})));case 1:case"end":return a.stop()}}))}},{key:"getUsers",value:function(e){return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(j.a.get("".concat("","/api/auth/user"),{headers:{Authorization:"Token ".concat(e),"Content-Type":"application/x-www-form-urlencoded"}}).then(t).catch(a));case 2:case"end":return n.stop()}}))})));case 1:case"end":return t.stop()}}))}},{key:"updateUser",value:function(e,t){return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.a.awrap(j.a.put("".concat("","/api/auth/user/").concat(e),t).then(a).catch(n));case 2:case"end":return r.stop()}}))})));case 1:case"end":return a.stop()}}))}}]),e}(),N=a(60),P=a.n(N),I=r.a.useEffect,S=r.a.useState,T=function(e){var t=Object(d.g)(),a=S({email:"",password:""}),n=Object(c.a)(a,2),o=n[0],l=n[1];I((function(){localStorage.removeItem("_kToken")}),[]);var i=function(){var e=o.email,t=o.password;return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)&&t.length>4};return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"email",className:"bmd-label-floating"},"E-po\u0161ta"),r.a.createElement("input",{id:"email",type:"email",className:"form-control",value:o.email,minLength:"5",onChange:function(e){l({email:e.target.value,password:o.password})}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password",className:"bmd-label-floating"},"Geslo"),r.a.createElement("input",{id:"password",type:"password",minLength:"5",className:"form-control",value:o.password,onChange:function(e){l({email:o.email,password:e.target.value})}})),r.a.createElement(w.a,{type:"primary",icon:"login",shape:"round",className:"login-form-button",onClick:function(){var e;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(i()){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,b.a.awrap(O.login(o));case 4:200==(e=a.sent).status?(P.a.fire({icon:"success",title:"Prijava je bila uspe\u0161na!"}).then((function(){t.push("/"),window.location.reload()})),localStorage.setItem("_kToken",e.data.token)):P.a.fire({icon:"error",title:"Prijava ni bila uspe\u0161na!"});case 6:case"end":return a.stop()}}))},disabled:!i()},"Prijava"))},C=a(510),z=a(89),F=function(e){var t=e.title,a=e.link,n=e.icon,o=e.css,l=e.shape;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:a},r.a.createElement(w.a,{type:o||"primary",icon:n,shape:l||"round",size:"large"},t)))},R=C.a.Meta,q=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{title:"Dodaj to\u010dko",link:"/new/point",icon:"plus"}),r.a.createElement("hr",null),r.a.createElement("div",{style:{display:"flex",flexFlow:"row wrap",position:"relative"}},[1,2,3,4,5,6,7,8].map((function(e,t){return r.a.createElement(C.a,{key:t,hoverable:!0,style:{flex:"0 1 calc(25% - 16px)",margin:"8px"},cover:r.a.createElement("img",{src:"https://geospatialmedia.s3.amazonaws.com/wp-content/uploads/2018/11/location-tech.jpg"})},r.a.createElement(R,{title:"Random location"}),r.a.createElement("hr",null),r.a.createElement(z.a,{title:"Podroben ogled"},r.a.createElement(w.a,{style:{float:"right",marginLeft:"10px"},type:"secondary",shape:"circle",icon:"fullscreen",size:"large",href:"/details/point/".concat(t)})),r.a.createElement(z.a,{title:"Uredi"},r.a.createElement(w.a,{style:{float:"right"},type:"primary",shape:"circle",icon:"edit",size:"large",href:"/edit/point/".concat(t)})))}))))},A=a(511),L=a(508),U=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){!function(){var e,t;b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=localStorage.getItem("_kToken"),a.next=3,b.a.awrap(O.getUsers(e));case 3:200==(t=a.sent).status&&o(t.data);case 5:case"end":return a.stop()}}))}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{title:"Dodaj administratorja",link:"/new/admin",icon:"plus"}),r.a.createElement("hr",null),r.a.createElement(A.a,{itemLayout:"horizontal",dataSource:a,renderItem:function(e){return r.a.createElement(A.a.Item,null,r.a.createElement(A.a.Item.Meta,{avatar:r.a.createElement(L.a,{src:"https://lh3.googleusercontent.com/proxy/Y1shLbYDADF-w5XLx4JUqfs-kOPuRgtP3nLwpYM0wP8NUQttSWMabqiRniN_0FTFeMu69iJbmlI4w54pRBmg6Z8mg4xEw0MB-bbJOBn-aiEUl4XAtKEh5DRPx20f"}),title:e.name,description:e.email}))}}))},D=a(47),B=a(246),_=a(512),M=a(236),H=a.n(M),J=a(515),W=function(e){var t=e.content,a=e.toggle,n=e.visibility,o=e.title,l=e.confirm;return r.a.createElement(J.a,{title:o,visible:n,onOk:l||a,onCancel:a,cancelButtonProps:{style:{display:"none"}},width:"50vw"},t)},X=function(e){var t=e.type,a=Object(n.useState)(!1),o=Object(c.a)(a,2),l=o[0],i=o[1],s=Object(n.useState)(null),u=Object(c.a)(s,2),p=u[0],d=u[1],f=Object(n.useState)({lat:46.4441,lng:15.197}),g=Object(c.a)(f,2),h=g[0],E=g[1],v=Object(n.useState)([]),b=Object(c.a)(v,2),y=b[0],k=b[1],x=Object(n.useState)({title:"",images:"",description:""}),j=Object(c.a)(x,2),O=j[0],N=j[1],I=function(e){var t=e.position;e.address,e.places;E(t)},S=function(){return i(!l)},T=function(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),404!=t.status};return l?r.a.createElement(W,{title:{pointForm:"Obrazec to\u010dke",locationPicker:"Izbirnik lokacije"}[p],content:function(){switch(p){case"locationPicker":return r.a.createElement(H.a,{containerElement:r.a.createElement("div",{style:{height:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"400px"}}),defaultPosition:h,onChange:I});case"pointForm":return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1",className:"bmd-label-floating"},"Naslov"),r.a.createElement("input",{type:"text",className:"form-control",value:O.title,onChange:function(e){N(Object(D.a)({},O,{title:e.target.value}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1",className:"bmd-label-floating"},"Povezave slik"),r.a.createElement("textarea",{className:"form-control",value:O.images,onChange:function(e){N(Object(D.a)({},O,{images:e.target.value}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1",className:"bmd-label-floating"},"Opis"),r.a.createElement("textarea",{className:"form-control",value:O.description,onChange:function(e){N(Object(D.a)({},O,{description:e.target.value}))}})));default:return"<p>Pri\u0161lo je do napake!</p>"}}(),visibility:l,toggle:S,confirm:function(){if("pointForm"===p){var e=O.title,t=O.images,a=O.description,n=(t=t.split("\n")).filter(T);n.length!==t.length?P.a.fire({title:"Napaka!",text:"Najdena je bila neveljavna povezava do slike!",icon:"error",confirmButtonText:"Nadaljuj"}):(k([].concat(Object(B.a)(y),[{title:e,description:a,images:n}])),N({title:"",images:"",description:""}),i(!1))}else i(!1)}}):r.a.createElement(_.a,{style:{minWidth:"50%"}},r.a.createElement(_.a.Item,null,r.a.createElement(w.a,{onClick:function(){S(),d("locationPicker")},icon:"select",shape:"round",htmlType:"button",className:"login-form-button"},"Izberi lokacijo"),r.a.createElement("span",null," ",r.a.createElement(m.a,{type:"environment",style:{color:"#66c"}})," zemljepisna dol\u017eina:",r.a.createElement("b",null,h.lng)," zemljepisna \u0161irina:"," ",r.a.createElement("b",null,h.lat)),r.a.createElement("hr",null)),r.a.createElement(_.a.Item,null,r.a.createElement(w.a,{icon:"plus",shape:"round",onClick:function(){S(),d("pointForm")}},"Dodaj zavihek"),r.a.createElement(A.a,{itemLayout:"horizontal",dataSource:y,renderItem:function(e){return r.a.createElement(A.a.Item,null,r.a.createElement(A.a.Item.Meta,{avatar:r.a.createElement(L.a,{src:e.images[0]}),title:e.title,description:e.description}))}}),r.a.createElement("hr",null)),r.a.createElement(_.a.Item,null,r.a.createElement(w.a,{onClick:function(){console.log(y,h)},type:"primary",icon:"environment",shape:"round",htmlType:"submit",className:"login-form-button"},"edit"==t?"Posodobi":"Dodaj")))},Y=r.a.useState,$=function(){var e=Y({name:"",email:"",password:""}),t=Object(c.a)(e,2),a=t[0],n=t[1],o=function(){var e=a.name,t=a.email,n=a.password;return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)&&n.length>4&&e.length>4};return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"name",className:"bmd-label-floating"},"Ime & Priimek"),r.a.createElement("input",{id:"name",type:"text",className:"form-control",value:a.name,minLength:"5",onChange:function(e){n(Object(D.a)({},a,{name:e.target.value}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"email",className:"bmd-label-floating"},"E-po\u0161ta"),r.a.createElement("input",{id:"email",type:"email",className:"form-control",value:a.email,minLength:"5",onChange:function(e){n(Object(D.a)({},a,{email:e.target.value}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password",className:"bmd-label-floating"},"Geslo"),r.a.createElement("input",{id:"password",type:"password",minLength:"5",className:"form-control",value:a.password,onChange:function(e){n(Object(D.a)({},a,{password:e.target.value}))}})),r.a.createElement(w.a,{type:"primary",icon:"login",shape:"round",className:"login-form-button",onClick:function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(o()){t.next=2;break}return t.abrupt("return");case 2:return e=localStorage.getItem("_kToken"),t.next=5,b.a.awrap(O.register(Object(D.a)({},a,{_AUTH:e})));case 5:200==t.sent.status&&P.a.fire({icon:"success",title:"Uporabnik je bil uspe\u0161no dodan!"});case 7:case"end":return t.stop()}}))},disabled:!o()},"Registracija"))},G=a(516),K=G.a.TextArea;var Q=_.a.create({name:"task"})((function(e){var t=e.form,a=e.type,n=t.getFieldDecorator;return r.a.createElement(_.a,{style:{width:"50%",minWidth:"300px"},onSubmit:function(e){e.preventDefault(),t.validateFieldsAndScroll((function(e,t){e||console.log("Received values of form: ",t)}))}},r.a.createElement(_.a.Item,{label:"naslov",hasFeedback:!0},n("title",{rules:[{required:!0,message:"Prosimo vnesite naslov!"}]})(r.a.createElement(G.a,{prefix:r.a.createElement(m.a,{type:"file-text",style:{color:"rgba(0,0,0,.25)"}})}))),r.a.createElement(_.a.Item,{label:"opis",hasFeedback:!0},n("description",{rules:[{required:!0,message:"Prosimo vnesite opis!"}]})(r.a.createElement(K,{rows:4}))),r.a.createElement(_.a.Item,null,r.a.createElement(w.a,{type:"primary",icon:"file",shape:"round",htmlType:"submit",className:"login-form-button"},"edit"==a?"Posodobi":"Dodaj")))})),Z=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"indepth view for point"))},V=function(){var e=[{path:"/login",component:r.a.createElement(T,null),authRequired:!1},{path:"/points",component:r.a.createElement(q,null),authRequired:!0},{path:"/admins",component:r.a.createElement(U,null),authRequired:!0},{path:"/new/point",component:r.a.createElement(X,{type:"new"}),authRequired:!0},{path:"/new/admin",component:r.a.createElement($,{type:"new"}),authRequired:!0},{path:"/new/task",component:r.a.createElement(Q,{type:"new"}),authRequired:!0},{path:"/edit/point/:id",component:r.a.createElement(X,{type:"edit"}),authRequired:!0},{path:"/edit/admin/:id",component:r.a.createElement($,{type:"edit"}),authRequired:!0},{path:"/details/point/:id",component:r.a.createElement(Z,null),authRequired:!0}];return r.a.createElement(d.d,null,e.map((function(e,t){var a=e.path,n=e.component,o=e.authRequired;return r.a.createElement(E,{key:t,path:a,isPrivate:o||!1},n)})))},ee=a(243),te=a.n(ee),ae=a(244),ne=a.n(ae),re=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{padding:20}},r.a.createElement("img",{style:{width:"100%",marginBottom:15},src:te.a}),r.a.createElement("img",{style:{width:"100%",padding:15,paddingBottom:0},src:ne.a})),r.a.createElement("hr",null))},oe=a(164),le=function(e){var t=e.title,a=e.link,n=e.icon;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.b,{to:a}),r.a.createElement(m.a,{type:n}),r.a.createElement("span",null,t))},ce=function(){return r.a.createElement(oe.a,{theme:"dark",style:{background:"#345"},mode:"inline"},r.a.createElement(oe.a.Item,{key:"/points"},r.a.createElement(le,{link:"/points",title:"To\u010dke",icon:"environment"})),r.a.createElement(oe.a.Item,{key:"/admins"},r.a.createElement(le,{link:"/admins",title:"Administratorji",icon:"user"})),r.a.createElement(oe.a.Item,{key:"/login"},r.a.createElement(le,{link:"/login",title:"Odjava",icon:"logout"})))},ie=function(){return r.a.createElement(oe.a,{theme:"dark",style:{background:"#345"},mode:"inline"},r.a.createElement(oe.a.Item,{key:"/points"},r.a.createElement(le,{link:"/points",title:"To\u010dke",icon:"environment"})),r.a.createElement(oe.a.Item,{key:"/login"},r.a.createElement(le,{link:"/login",title:"Prijava",icon:"login"})))},se=i.a.Header,me=i.a.Content,ue=i.a.Footer,pe=i.a.Sider,de=s.a.Title;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement((function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(localStorage.getItem("_kToken")||void 0),s=Object(c.a)(l,2),f=s[0];s[1];return r.a.createElement(d.c,{history:g},r.a.createElement(i.a,{style:{minHeight:"100vh"}},r.a.createElement(p.a,null,r.a.createElement(pe,{style:{background:"#345"},width:"300",collapsible:!0,collapsed:a,onCollapse:o},!a&&r.a.createElement(re,null),f?r.a.createElement(ce,null):r.a.createElement(ie,null)),r.a.createElement(i.a,null,r.a.createElement(se,{style:{background:"#002140",padding:10,borderLeft:"1px solid white",boxShadow:"0 4px 2px -2px gray"}},r.a.createElement(de,{style:{color:"#fff"}},r.a.createElement(m.a,{type:"dashboard"})," Kois Administracija")),r.a.createElement(me,{style:{margin:"0 16px"}},r.a.createElement(u.a,{style:{margin:"16px 0"}}),r.a.createElement("div",{id:"container",style:{padding:24,background:"#fff",minHeight:"40vh"}},r.a.createElement(V,null))),r.a.createElement(ue,{style:{textAlign:"center"}},"Samo Pritrznik & Janez Sedeljsak 2019/20 \xa9")))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[251,1,2]]]);
//# sourceMappingURL=main.3d80a1d0.chunk.js.map